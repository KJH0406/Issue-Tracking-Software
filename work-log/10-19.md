# **🗓️** Daily Work Log

## [2024-10-19] 5 hours

### 🎯 오늘의 목표

- [x] 이미지 업로드 기능 구현
  - [x] AppWrite storage 설정
  - [x] 이미지 업로드 UI 구현
  - [x] 백엔드 API 연동
- [x] 워크스페이스 추가 구현
  - [x] 셀렉터 기능 {워크스페이스 전환}
  - [x] 독립 페이지 구성
- [x] 멤버 테이블 생성 및 워크스페이스 생성 로직 수정(DB)

### 📝 완료한 작업

1. 이미지 업로드 기능 구현
   - AppWrite storage 설정
     - 새로운 storage 버킷 생성
     - User Role에 CRUD 권한 부여
     - 최대 파일 크기 1MB로 설정
     - 허용 파일 확장자: jpg, png, jpeg, svg 추가
   - 워크스페이스 생성 폼에 이미지 업로드 UI 구현
     - 파일 선택 input 추가
     - 이미지 미리보기 기능 추가
   - 백엔드 API 연동
     - 이미지 업로드 함수 구현
     - 워크스페이스 생성 시 이미지 URL 저장 로직 추가
2. 워크스페이스 추가 구현
   - 스위치 기능 (워크스페이스 전환)
     - useWorkspaceId 커스텀 훅 구현
     - 워크스페이스 셀렉터에 라우팅 로직 추가
   - 독립 페이지 구성
     - 레이아웃 및 기본 구조 설정
3. 멤버 테이블 생성 및 워크스페이스 생성 로직 수정
   - AppWrite DB에 'members' 컬렉션 생성
     - 스키마: userId(required), workspaceId(required), role(enum: ADMIN, MEMBER)
   - 워크스페이스 생성 프로세스 수정
     - 워크스페이스 생성 시 자동으로 관리자 멤버 생성 로직 추가
     - 워크스페이스에 inviteCode 속성 추가
4. 워크스페이스 셀렉터 구현
   - 워크스페이스 썸네일 컴포넌트 구현
     - 이미지 유무에 따른 조건부 렌더링 로직 추가
   - useGetWorkspaces 커스텀 훅 구현
   - Select 컴포넌트를 활용한 드롭다운 메뉴 구현
     - 각 워크스페이스 항목에 썸네일과 이름 표시
5. 추가 구현 사항
   - 로그아웃 시 워크스페이스 데이터 캐시 무효화 로직 추가
   - 대시보드 로딩 컴포넌트 구현
   - 반응형 모달 컴포넌트 구현 (데스크탑, 모바일 대응)

### 🧠 배운 점

1. AppWrite 사용법 심화
   - Storage 기능의 세부 설정 방법 (권한, 용량 제한, 파일 타입 제한 등)
   - Database 컬렉션 생성 및 스키마 설정 방법
2. React 커스텀 훅 디자인
   - useWorkspaceId, useGetWorkspaces 등 재사용 가능한 로직 모듈화
3. nuqs 라이브러리 활용
   - URL 쿼리 파라미터와 React 상태 동기화 방법
   - useQueryState 및 parseAsBoolean 함수 사용법

### 🚧 진행 중인 작업

- 목표했던 작업 모두 완료

### 🛑 트러블 슈팅

1. 워크스페이스 생성 이후 셀렉터에 스페이스 이름 표시가 바로 되지 않는 문제 발생[해결 중]

### 📊 향후 계획

- [ ] 워크스페이스 세팅 페이지 구현
  - 워크스페이스 정보 수정 기능
  - 멤버 관리 (초대, 권한 변경, 제거) 기능
  - 워크스페이스 삭제 기능
- [ ] 서버 쿼리 리펙토링
  - API 엔드포인트 정리

💡 기타 메모

독립 페이지나 커스텀 훅등을 구현하면서 재 사용성에 대해서 한번 더 생각 해볼 수 있는 과정이었음. 또한 향후 권한 커스텀을 통해서 AI 피처를 사용할 수 있는 사용자를 제한하는 식으로 확장할 수 있을 것 같음.
